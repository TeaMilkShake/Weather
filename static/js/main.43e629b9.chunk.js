(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{55:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(2),n=a.n(r),s=a(29),i=a.n(s),o=(a(55),a(5)),u=a.n(o),l=a(12),d=a(8),j=a(18),b=a.n(j),h="https://api.bigdatacloud.net/data/reverse-geocode-client?",m="https://api.openweathermap.org/data/2.5/weather?",p=b.a.create(),O=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(h,"latitude=").concat(t,"&longitude=").concat(a,"&localityLanguage=en"));case 3:return c=e.sent,e.abrupt("return",c.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(m,"id=").concat(t,"&units=metric&APPID=").concat("5f173b1653a520b1204c3d8cc7202fb6"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",url:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities",params:{limit:"5",minPopulation:"30000",namePrefix:t},headers:{"x-rapidapi-key":"73684db7a1msh8b685a8e80dea2ap10cbdejsn3b4ff31b5e1c","x-rapidapi-host":"wft-geo-db.p.rapidapi.com"},cancelToken:a},e.prev=1,e.next=4,p.request(c);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(e){return e.suggestions?0===e.suggestions.length?Object(c.jsx)("div",{style:{visibility:e.areSuggestionsVisible?"visible":"hidden"},className:"suggestions",children:Object(c.jsx)("p",{className:"suggestion_no_results",children:"No results"})}):Object(c.jsx)("div",{className:"suggestions",style:{visibility:e.areSuggestionsVisible?"visible":"hidden"},children:e.suggestions.map((function(t,a){return Object(c.jsx)("p",{className:"suggestion",onClick:function(){return e.handleSelect(t.city,t.country)},children:"".concat(t.city,", ").concat(t.country)},a)}))}):Object(c.jsx)("div",{})},v=a(4),_=a(6),w=function(e){return Object(c.jsx)("div",{style:{display:e.isLoading?"block":"none"},className:"small_loader_wrapper",children:Object(c.jsxs)("div",{className:"small_loader",children:[Object(c.jsx)(_.d,{className:"loader_icon_dark"}),Object(c.jsx)(_.d,{className:"loader_icon_dark"}),Object(c.jsx)(_.d,{className:"loader_icon_light"})]})})},y=function(e){var t=Object(v.f)(),a=new URLSearchParams(t.search);return a.get(e)?a.get(e):null},N=function(e){var t=Object(r.useState)(null),a=Object(d.a)(t,2),n=a[0],s=a[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],h=o[1],m=Object(r.useState)(!1),p=Object(d.a)(m,2),O=p[0],f=p[1],_=Object(r.useState)(!1),y=Object(d.a)(_,2),N=y[0],k=y[1],L=Object(v.e)(),C=Object(r.useRef)(),S=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.target.value),function(){var e=Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.value.length>=4)){e.next=8;break}return"undefined"!==typeof C.current&&C.current.cancel(),C.current=b.a.CancelToken.source(),k(!0),e.next=6,x(t.target.value,C.current.token);case 6:(a=e.sent)&&(f(!0),s(a.data),k(!1));case 8:3===t.target.value.length&&("undefined"!==typeof C.current&&C.current.cancel(),k(!1),f(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault()}(e)},className:"form "+e.locationClass,children:Object(c.jsxs)("div",{className:"text_input_block",children:[Object(c.jsx)(w,{isLoading:N}),Object(c.jsx)("input",{type:"text",placeholder:"Type and select city from list",onFocus:function(){f(!0)},onBlur:function(){setTimeout((function(){f(!1)}),200)},onChange:S,value:j}),Object(c.jsx)(g,{areSuggestionsVisible:O,handleSelect:function(e,t){L.push("/Weather/city?q=".concat(e,"&country=").concat(t))},suggestions:n})]})})},k=Object(r.createContext)(),L=function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useRef)(!1);return Object(c.jsx)(k.Provider,{value:{aboutRef:t,burgerRef:a,isBurgerClicked:n,toogleBurger:function(){n.current=!n.current,n.current?a.current.classList.add("burger_clicked"):a.current.classList.remove("burger_clicked"),t.current.style.clipPath=n.current?"inset(0 0 0 0)":"inset(0 0 100% 0)"}},children:e.children})},C=function(e){var t=Object(r.useContext)(k);return Object(r.useEffect)((function(){var e=function(){t.toogleBurger()};return t.burgerRef.current.addEventListener("click",e),function(){t.burgerRef.current.removeEventListener("click",e)}})),Object(c.jsxs)("div",{ref:t.burgerRef,className:"burger "+e.locationClass,children:[Object(c.jsx)("div",{className:"burger_line"}),Object(c.jsx)("div",{className:"burger_line"}),Object(c.jsx)("div",{className:"burger_line"})]})},S=a(46),D=a(23),I=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),c=a[0],n=a[1];return Object(r.useEffect)((function(){switch(e.weather){case"Clouds":case"Mist":"few clouds"===e.weatherDescription?n(_.c):n(_.a),n(_.a);break;case"Clear":n(_.e);break;case"Snow":n(S.a);break;case"Rain":"light rain"===e.weatherDescription?n(_.d):n(_.b);break;case"Drizzle":n(_.b);break;case"Thunderstorm":n(D.b);break;default:n(D.a)}}),[e.weather,e.weatherDescription]),c},R=function(e){return Object(c.jsxs)("div",{className:"home_weather",children:[Object(c.jsxs)("p",{className:"home_temperature",children:[e.weatherData.temperature,"\xb0C"]}),Object(c.jsxs)("p",{className:"home_city",children:[e.currentPlace,", ",e.county,Object(c.jsx)("span",{className:"home_weather_icon",children:Object(c.jsx)(I,{weather:e.weatherData.weather,weatherDescription:e.weatherData.description})})]})]})},P=a(19),E=a.p+"static/media/clear.d5573b8f.jpg",T=a.p+"static/media/cloudy.3a9a56da.jpg",V=a.p+"static/media/rain.d669916a.jpg",F=a.p+"static/media/drizzle.4be2f625.jpg",z=a.p+"static/media/storm.230974b5.png",B=a.p+"static/media/clearAndCloudy.3ad6f20e.png",M=a.p+"static/media/snow.ee6f6c52.jpg",W=a.p+"static/media/mist.bb0b398b.jpg",q=function(e){var t=Object(r.useRef)({current:{src:""}});Object(r.useEffect)((function(){if(e.weather){switch(t.current=new Image,e.weather){case"Clouds":t.current.src=T;break;case"Mist":"few clouds"===e.weatherDescription?t.current.src=B:t.current.src=T;break;case"Clear":t.current.src=E;break;case"Snow":t.current.src=M;break;case"Rain":"light rain"===e.weatherDescription?t.current.src=F:t.current.src=V;break;case"Drizzle":break;case"Thunderstorm":t.current.src=z;break;default:t.current.src=W}t.current.onload=function(){e.setIsLoaderVisible&&e.setIsLoaderVisible(!1)}}}),[e.weather]);var a={backgroundImage:"linear-gradient(rgba(1, 2, 11, 0.4), rgba(1, 2, 11, 0.4)), url(".concat(t.current.src,")"),backgroundPosition:"center",backgroundSize:"cover"};return n.a.cloneElement(e.children,Object(P.a)(Object(P.a)({},e),{},{backgroundImageStyles:a,src:t.current.src}))},A=a(24),J=a(26),G=function(e){var t=Object(r.useState)(!1),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(r.useEffect)((function(){e.isLoaderVisible||""===e.temperature||s(!0)}),[e.isLoaderVisible,e.temperature]),Object(c.jsx)(A.Transition,{items:n,config:J.a.slow,from:{transform:"scale(1)"},enter:{transform:"scale(1.2)"},leave:{transform:"scale(1.2)"},children:function(t){return t&&function(t){return Object(c.jsx)("div",{style:Object(P.a)(Object(P.a)({},t),e.backgroundImageStyles),className:"home_image"})}}})},H=function(e){var t=Object(r.useState)(!0),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(r.useEffect)((function(){e.isLoaderVisible||""===e.temperature||s(!1)}),[e.isLoaderVisible,e.temperature]),Object(c.jsx)(A.Transition,{items:n,config:J.a.gentle,from:{opacity:1},enter:{opacity:1},leave:{opacity:0},children:function(e){return e&&function(e){return Object(c.jsx)("div",{style:e,className:"home_loader_block",children:Object(c.jsxs)("div",{className:"animated_loader",children:[Object(c.jsx)(_.a,{}),Object(c.jsx)(_.a,{}),Object(c.jsxs)("div",{className:"loading_block",children:[Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"})]})]})})}}})},U=function(){var e=Object(r.useState)(!0),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1],b=Object(r.useState)(""),h=Object(d.a)(b,2),m=h[0],p=h[1],x=Object(r.useState)({temperature:"",weather:"",description:""}),g=Object(d.a)(x,2),v=g[0],_=g[1];return Object(r.useEffect)((function(){navigator.geolocation.getCurrentPosition(function(){var e=Object(l.a)(u.a.mark((function e(t){var a,c,r,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.coords.latitude,c=t.coords.longitude,e.next=4,O(a,c);case 4:return""!==(r=e.sent).city?j(r.city):j(r.locality),p(r.countryName),r.localityInfo.administrative.map((function(e){e.name!==r.city&&e.name!==r.locality||!e.hasOwnProperty("geonameId")||(n=e.geonameId)})),e.next=10,f(n);case 10:(s=e.sent)&&_({temperature:Math.round(s.main.temp),weather:s.weather[0].main,description:s.weather[0].description});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.jsxs)("div",{className:"home_wrapper",children:[Object(c.jsx)(H,{isLoaderVisible:a,temperature:v.temperature}),Object(c.jsx)(q,{setIsLoaderVisible:n,weather:v.weather,weatherDescription:v.description,children:Object(c.jsx)(G,{isLoaderVisible:a,temperature:v.temperature})}),Object(c.jsx)(C,{locationClass:"home"}),Object(c.jsxs)("div",{className:"side_offset home",children:[Object(c.jsx)("p",{className:"home_logo",children:"Weather logo."}),Object(c.jsx)(R,{currentPlace:o,county:m,weatherData:v}),Object(c.jsx)(N,{locationClass:"home"})]})]})},K=function(e){return Object(c.jsxs)("div",{className:"navbar_background",children:[Object(c.jsx)("div",{className:"side_offset navbar",children:Object(c.jsx)("div",{className:"search_block",children:Object(c.jsx)(N,{locationClass:"navbar"})})}),Object(c.jsx)(C,{locationClass:"navbar"})]})},Q=function(){return Object(c.jsx)(r.Fragment,{children:Object(c.jsx)("div",{className:"city_photo loader"})})},X=function(e){var t=e.backgroundImageStyles;return Object(c.jsx)("div",{style:t,className:"city_photo"})},Y=a(47),Z=a(48),$=a(25),ee=function(){return Object(c.jsx)("div",{className:"no_results_block",children:Object(c.jsxs)("div",{className:"no_results_content",children:[Object(c.jsxs)("div",{className:"no_results_title",children:[Object(c.jsx)($.b,{}),Object(c.jsx)("p",{children:"No results"})]}),Object(c.jsx)("p",{className:"no_results_text",children:"No results for 'Luudown'"})]})})},te=function(){return Object(c.jsx)(r.Fragment,{children:Object(c.jsxs)("div",{className:"city_text",children:[Object(c.jsx)("div",{className:"city_main_info loader"}),Object(c.jsxs)("div",{className:"city_additional_info",children:[Object(c.jsx)("div",{className:"city_additional_info_item loader"}),Object(c.jsx)("div",{className:"city_additional_info_item loader"}),Object(c.jsx)("div",{className:"city_additional_info_item loader"})]})]})})},ae=function(e){return!0===e.noResults?Object(c.jsx)(ee,{}):Object(c.jsxs)("div",{className:"city_text",children:[Object(c.jsxs)("div",{className:"city_main_info",children:[Object(c.jsxs)("h1",{children:[e.placeName.city,", ",e.placeName.country]}),Object(c.jsxs)("div",{className:"weather_mini_card",children:[Object(c.jsxs)("p",{className:"city_temperature",children:[Math.round(e.temperature),"\xb0C"]}),Object(c.jsx)("div",{className:"mini_card_line"}),Object(c.jsx)("div",{className:"city_weather_icon",children:Object(c.jsx)(I,{weather:e.weather,weatherDescription:e.weatherDescription})})]})]}),Object(c.jsxs)("div",{className:"city_additional_info",children:[Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Wind speed ",Object(c.jsx)(_.f,{})]}),Object(c.jsxs)("p",{children:[e.windSpeed," m/s"]})]}),Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Humidity ",Object(c.jsx)(Y.a,{})]}),Object(c.jsxs)("p",{children:[e.humidity,"%"]})]}),Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Pressure ",Object(c.jsx)(Z.a,{})]}),Object(c.jsxs)("p",{children:[e.pressure," psf"]})]})]})]})},ce=function(){var e=Object(r.useState)({isLoading:!0,data:null}),t=Object(d.a)(e,2),a=t[0],n=t[1],s=y("q").toLowerCase(),i=y("country").toLowerCase(),o=Object(r.useRef)({city:"",country:""});return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({isLoading:!0,data:null}),e.next=3,x(s);case 3:t=e.sent,0===t.data.map(function(){var e=Object(l.a)(u.a.mark((function e(t){var a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name.toLowerCase()!==s||t.country.toLowerCase()!==i){e.next=10;break}return e.next=3,O(t.latitude,t.longitude);case 3:return a=e.sent,o.current={city:t.name,country:t.country},a.localityInfo.administrative.map((function(e){e.name.toLowerCase()===i&&e.hasOwnProperty("geonameId")&&(c=e.geonameId)})),e.next=8,f(c);case 8:r=e.sent,n({isLoading:!1,data:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).length&&n({isLoading:!1,data:null});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,i]),a.isLoading?Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)(Q,{}),Object(c.jsx)(te,{})]}):Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)(q,{weather:a.data.weather[0].main,weatherDescription:a.data.weather[0].description,children:Object(c.jsx)(X,{})}),Object(c.jsx)(ae,{isLoading:a.isLoading,noResults:!a.data,temperature:a.data.main.temp,weather:a.data.weather[0].main,weatherDescription:a.data.weather[0].description,windSpeed:a.data.wind.speed,humidity:a.data.main.humidity,pressure:a.data.main.pressure,placeName:o.current})]})},re=function(){return Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)(K,{}),Object(c.jsx)(ce,{})]})},ne=a.p+"static/media/about.29abd825.png",se=a(49),ie=a(32),oe=function(e){var t=Object(r.useContext)(k);return Object(c.jsxs)("div",{ref:t.aboutRef,className:"about",children:[Object(c.jsx)("img",{src:ne,alt:""}),Object(c.jsxs)("div",{className:"about_info_block",children:[Object(c.jsxs)("div",{className:"about_top_part",children:[Object(c.jsx)("h1",{children:"About & Contacts"}),Object(c.jsxs)("div",{className:"about_item",children:[Object(c.jsx)("div",{className:"about_item_icon",children:Object(c.jsx)($.a,{})}),Object(c.jsx)("p",{children:"This application represents a weather search system."})]}),Object(c.jsxs)("div",{className:"about_item",children:[Object(c.jsx)("div",{className:"about_item_icon",children:Object(c.jsx)(se.a,{})}),Object(c.jsx)("p",{children:"Search for weather conditions in different cities."})]})]}),Object(c.jsxs)("div",{className:"about_bottom_part",children:[Object(c.jsxs)("div",{className:"about_email",children:[Object(c.jsx)("div",{}),Object(c.jsx)("p",{children:"nik.yanovskyy@gmail.com"})]}),Object(c.jsx)("a",{href:"https://habr.com/ru/company/ruvds/blog/445276/",rel:"noreferrer",target:"_blank",className:"about_link_btn",children:Object(c.jsx)(ie.a,{})}),Object(c.jsx)("a",{href:"https://habr.com/ru/company/ruvds/blog/445276/",rel:"noreferrer",target:"_blank",className:"about_link_btn",children:Object(c.jsx)(ie.b,{})})]})]})]})},ue=a(22);var le=function(){return Object(c.jsx)(L,{children:Object(c.jsxs)("div",{className:"app_wrapper",children:[Object(c.jsx)(oe,{}),Object(c.jsxs)(ue.a,{children:[Object(c.jsx)(v.a,{exact:!0,path:"/Weather",render:function(){return Object(c.jsx)(U,{})}}),Object(c.jsx)(v.a,{exact:!0,path:"/Weather/city",render:function(){return Object(c.jsx)(re,{})}})]})]})})},de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(le,{})}),document.getElementById("root")),de()}},[[95,1,2]]]);
//# sourceMappingURL=main.43e629b9.chunk.js.map